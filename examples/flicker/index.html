<!DOCTYPE HTML>
<html>
<head>
    <title>Flicker</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        #flicker-header {
            position: absolute;
            width: 100%;
        }
        #msg-block {
            width: 100%;
            padding: 10px;
            background: none;
        }
    </style>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap-theme.min.css">

    <script src="../../bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="../../dist/flicker.js"></script>
</head>
<body style="padding: 0">
<div id="flicker-header" style="top: 50px">
    <div align="center">
        <h1>Flicker</h1>
    </div>
    <div id="msg-block">
        <div class="row">
            <div class="col-lg-12">
                <div class="input-group">
                    <input id="message" type="text" class="form-control" placeholder="Message to flicker...">
                <span class="input-group-btn">
                    <button id="flicker" class="btn btn-default" type="button">Flicker</button>
                </span>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    function flicker(message, done) {
        var f = new Flicker(window.innerWidth, window.innerHeight);
        $(window).bind('resize', function() {
            f.resize(window.innerWidth, window.innerHeight);
        });

        f.add(Flicker.steps.Countdown);
        f.add(Flicker.steps.Sender);

        document.body.appendChild(f.view);

        f.start(message, function () {
            document.body.removeChild(f.view);
            done && done();
        });
    }


    $('#flicker').on('click', function () {
        var elMessage = $('#message');
        var msg = elMessage.val();
        if (!msg || msg.length === 0) {
            elMessage.focus();
            return;
        }
        var header = $('#flicker-header');
        header.hide();
//        header.disable();
        flicker(msg, function () {
//            header.enable();
            header.show();
        });
    });

    $('#message').keypress(function(event){

        if (event.keyCode == 10 || event.keyCode == 13) {
            $('#flicker').click();
        }

    });
</script>
</body>
</html>